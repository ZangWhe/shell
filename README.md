# shell
shell 脚本练习

shell1: 
- 遍历data目录下的txt文件
- 将这些文件作个备份
- 并将文件名加上年月日的后缀

shell2:
- 新建用户并保存用户名和密码到指定文件

shell3:
- 检测本机所有磁盘分区读写是否正常
- 实现：遍历所有挂载点，新建一个测试文件，再删除该文件，如果可以正常新建删除，那么该挂载点正常

shell4:
- 检查指定目录下的所有文件和目录，看是否满足以下条件：
- 1）所有文件权限为644
- 2）所有目录权限为755
- 3）文件和目录所有者为www，所属组为root
- 如果不满足，改成符合要求
- 权限要先判断，再修改，不能直接修改

shell5:
- 有一个目录，如/data/att/，下有数百个子目录，比如/data/att/zhangsan /data/att/lisi
- 再下一层是以日期命名的目录，如/data/att/zhangsan/20230501
- 每天都会生成一个新的日期目录
- 由于/data/所在磁盘快满了
- 所以需要将老文件挪到另外一个新文件中
- 如mv /data/att/zhangsan/20230501 /datanew/att/zhangsan/20230501
- 挪完之后还需要做软连接
- 如：ln -s /datanew/att/zhangsan/20230501 /data/att/zhangsan/20230501

- 写一个脚本，要求/data/att下所有子目录都要按照这样操作
- 脚本每天01：00执行一次
- 注：要确保老文件成功挪到/datanew/att之后，再做软连接絮，需要有日志

shell6:
- 写一个监控脚本，监控系统负载，如果系统负载超过10，需要记录系统状态信息
- 1）系统负载命令适用uptime命令，查看过去一分钟的平均负载
- 2）系统状态适用如下工具标记：top,vmstat,ss
- 3）要求每20s监控一次
- 4）系统状态信息保存到/opt/logs/下面，保留一个月，文件名带有`data +%s`后缀或前缀

shell7:
- 有一台f服务器作为web应用，有一个目录(/data/web/attachment)
- 不定时会被用户上传新的文件，但是不知道什么时候会上传
- 所以，需要我们每5分钟做一次检测看是否有新文件生成
- 还需要将新文件的列表输出到一个按年/月/日/时/分，为名字的日志中

- 思路：
- 定时任务，每五分钟执行一次检测
- 使用find命令查找5分钟内是否有过更新的文件
- 如果有更新，那么这个命令会有输出
- 因此，可以将输出结果的行数作为比较对象，大于0表示有新文件

shell8:
- 输入一个数字，然后运行对应的一个命令

- 显示命令如下：
- *cmd menu** 1-date 2-ls 3-who 3-pwd
- 当输入1时，会运行date，输入2时，会运行ls,...

shell9:
- 写一个脚本，执行后，打印一行提示"Please input a number"
- 要求用户输入数字时，然后打印出该数字，然后再次要求用户输入
- 直到用户输入"exit"停止

shell10:
- 写一个监控脚本，监控某站点访问是否正常
- 提示：
- 1)可以将访问的站点以参数的形式提供，例如sh xxx.sh www.baidu.com
- 2)状态码为2xx或3xx表示正常
- 3)正常时echo正常，不正常时echo不正常

shell11:
- 使用传参的方法写一个脚本，实现加减乘除的功能
- 例如 sh a.sh 1 2,分别计算加减乘除的结果
- 要求：
- 1)脚本需判断提供的两个数字是否必须为证书
- 2)在做减法或者除法时，要判断哪个数字大
- 3)减法时要用大的数字减去小的
- 4)除法时徐奥用大的数字除以小的数字，并且结果需要保留两个小数点

shell12:
- 编写一个带参数的脚本，实现下载文件的效果，参数有两个：
- 1）第一个参数为文件下载链接
- 2）第二个参数是文件保存目录
- 注：要判断保存目录是否为空

shell13:
- 用shell脚本实现：多人抽签游戏，每人执行脚本实现一个随机数，具体要求如下
- 1）脚本执行后，输入人名，生成1-99之间的数字；
- 2）相同的名字重复执行，抽到的数字应该和之前的保持一致
- 3）前面已经出现过的数字，下次不能再出现
- 4）需要将名字和对应的数字记录到一个文件里
- 5）脚本一旦运行，除非按Ctrl+C停止，否则要一直运行

shell14:
- 写一个日志归档脚本，类似于系统的logrotate程序做日志归档
- 假如服务的输出日志是1.log，要求每天归档一个，1.log第二天变成1.log.1，第三天1.log.2，第四天1.log.3,一直到1.log.5

shell15:
- 写一个脚本，判断给定的一串数字是否是合法的日期

shell16:
- 写一个脚本产生随机三位(包括前导0)的数字，并且可以根据用户的输入参数来判断输出几组

shell17:
- 有两个文件a.txt和b.txt
- 需求是将a,txt有的但b.txt中没有的行找出来，并写入到c.txt中
- 然后计算c.txt的行数

shell18
- 写一个脚本可以接受选项[i,I],完成以下任务：
- 1）使用如下形式：xxx.sh [-i interface | -I ip]
- 2）当使用-i选项时，显示指定网卡的ip地址
-    当使用-I选项是，显示其指定ip所属的网卡

- 例如：sh xxx.sh -i ens160
-       sh xxx.sh -I 192.168.0.1
- 3）当使用除了[-i | -I]选项时，显示[-i interface | -I ip]此信息
- 4）当用户指定信息不符合时，显示错误(比如指定的eth0不存在)

shell19
- 编写一个巡检脚本，用于检测系统里的所有服务是否正常运行
- 假定，系统运行的服务有Nginx,MySQL,Redis,Tomcat
- 要求脚本有内容输出，可以明确告知服务是否正常运行

shell20
- 写一个监控服务器CPU使用率的监控脚本
- 思路：使用top -bn1 命令，去除当前空闲CPU的百分比值（只取整数），然后用100减去这个数值
